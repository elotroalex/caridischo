{% assign collection = site[include.collection] %} 
{% assign subset = collection | where: include.facet_by,
    include.only | sort: 'order' %} 
    
<div
  id="wax-gallery-{{ include.only | downcase | replace: ' ', '-' }}-container"
  class="wax-gallery-container full-width"
>
  <div class="wax-inline-container">
    <div
      id="{{ include.only | downcase | replace: ' ', '-' }}-facet-buttons"
      class="facet-buttons"
    ></div>
    <div id="wax-gallery-{{ include.only | downcase | replace: ' ', '-' }}" class="wax-gallery"></div>
  </div>
</div>

<script type="text/javascript">
  $( document ).ready(function() {
    var container = $('#wax-gallery-{{ include.only | downcase | replace: ' ', '-' }}-container');
    var gallery = $('#wax-gallery-{{ include.only | downcase | replace: ' ', '-' }}');
    var buttonDiv = $('#{{ include.only | downcase | replace: ' ', '-' }}-facet-buttons');

      {% for item in subset %}
        {%- capture item_html -%}
          "<div class='gallery-item {{ item[include.facet_by] | slugify }} all'><a href='{{ item.url | absolute_url }}'><div class='hovereffect'><img class='img-responsive gallery-wide-thumb' src='{{site.baseurl}}/img/derivatives/simple/{{ item.pid }}/fullwidth.jpg'/><div class='overlay'><p class='info'>{{ item.label }}</p></div></div></a></div>"
        {%- endcapture -%}
        gallery.append({{ item_html | strip_newlines }});
      {% endfor %}

  });
</script>
    